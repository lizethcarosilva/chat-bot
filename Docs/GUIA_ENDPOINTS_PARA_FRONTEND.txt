â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¡ GUÃA DE ENDPOINTS PARA TU FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Base URL: http://localhost:8000
DocumentaciÃ³n interactiva: http://localhost:8000/docs


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¬ CLUSTERING (NUEVO - Hierarchical Clustering con IA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Clustering de Clientes (SegmentaciÃ³n)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GET /api/clustering/clientes?n_clusters=4

   Retorna:
   {
     "n_segmentos": 4,
     "total_clientes_analizados": 150,
     "silhouette_score": 0.587,
     "calidad_clustering": "Buena",
     "segmentos": [
       {
         "nombre": "VIP - Alta frecuencia",
         "total_clientes": 35,
         "gasto_promedio": 850.00,
         "citas_promedio": 8.2,
         "valor_total_segmento": 29750.00
       }
     ]
   }


2. Clustering de Mascotas
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GET /api/clustering/mascotas?n_clusters=3

   Retorna:
   {
     "clusters": [
       {
         "cluster_id": 0,
         "total_mascotas": 250,
         "edad_promedio": 3.5,
         "tipo_mascota_predominante": "Perro"
       }
     ]
   }


3. Clustering de Servicios
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GET /api/clustering/servicios?n_clusters=3

   Retorna:
   {
     "grupos": [
       {
         "grupo_id": 0,
         "servicios": ["Consulta General", "VacunaciÃ³n"],
         "hora_promedio": 10.3
       }
     ]
   }


4. Clustering Completo (TODO)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GET /api/clustering/completo

   Retorna: Todos los anÃ¡lisis de clustering en una sola llamada


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š MÃ‰TRICAS DE NEGOCIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GET /api/metricas/citas-hoy          â†’ Citas programadas hoy
GET /api/metricas/cantidad-productos â†’ Total productos
GET /api/metricas/ventas-dia         â†’ Ventas del dÃ­a
GET /api/metricas/ventas-mes         â†’ Ventas del mes
GET /api/metricas/productos-proximos-vencer â†’ Productos por vencer
GET /api/metricas/alerta-bajo-inventario â†’ Bajo inventario
GET /api/metricas/comparativa-ventas â†’ Mes actual vs anterior
GET /api/metricas/dashboard          â†’ TODAS las mÃ©tricas (recomendado)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ˆ ANÃLISIS Y ESTADÃSTICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GET /api/estadisticas                â†’ EstadÃ­sticas generales
GET /api/analisis/tipos-mascota      â†’ Tipos mÃ¡s comunes
GET /api/analisis/dias-atencion      â†’ DÃ­as con mÃ¡s atenciÃ³n
GET /api/analisis/horas-pico         â†’ Horas pico
GET /api/analisis/servicios          â†’ Servicios mÃ¡s usados


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¤– CHATBOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

POST /api/chat

Body:
{
  "mensaje": "tu pregunta aquÃ­",
  "usuario_id": "user123"
}

Retorna:
{
  "respuesta": "texto de respuesta",
  "intencion": "tipo_detectado",
  "confianza": 0.85,
  "timestamp": "2024-11-04T21:30:00"
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’» EJEMPLO DE USO EN TU FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Obtener clustering de clientes
fetch('http://localhost:8000/api/clustering/clientes')
  .then(res => res.json())
  .then(data => {
    // Usar los datos en tu UI
    const segmentos = data.segmentos;
    const vip = segmentos.find(s => s.nombre.includes('VIP'));
    console.log('Clientes VIP:', vip.total_clientes);
  });

// Obtener todas las mÃ©tricas
fetch('http://localhost:8000/api/metricas/dashboard')
  .then(res => res.json())
  .then(data => {
    console.log('Citas hoy:', data.citas_hoy.total);
    console.log('Ventas:', data.ventas_dia.total_ventas);
  });

// Chatbot
fetch('http://localhost:8000/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    mensaje: "clustering",
    usuario_id: "user123"
  })
})
  .then(res => res.json())
  .then(data => console.log(data.respuesta));


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ENDPOINTS IMPLEMENTADOS:

âœ… 4 endpoints de Clustering (Hierarchical Clustering con IA)
âœ… 8 endpoints de MÃ©tricas de Negocio
âœ… 5 endpoints de AnÃ¡lisis y EstadÃ­sticas
âœ… 1 endpoint de Chatbot
âœ… 7 endpoints de Consultas

Total: 25 endpoints REST listos para consumir


DOCUMENTACIÃ“N:

ğŸ“– ENDPOINTS_CLUSTERING.md          â†’ Endpoints de clustering detallados
ğŸ“– ENDPOINTS_RESUMEN_FINAL.md       â†’ Lista rÃ¡pida de todos los endpoints
ğŸ“– HIERARCHICAL_CLUSTERING_DOCS.md  â†’ DocumentaciÃ³n tÃ©cnica de clustering
ğŸ“– METRICAS_NEGOCIO.md              â†’ DocumentaciÃ³n de mÃ©tricas
ğŸ“– http://localhost:8000/docs       â†’ Swagger UI (interactivo)


ARCHIVOS DE BACKEND:

ğŸ api.py          â†’ API REST con FastAPI
ğŸ database.py     â†’ Consultas a PostgreSQL
ğŸ chatbot.py      â†’ Chatbot con IA
ğŸ predictor.py    â†’ Clustering + Predicciones


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ INICIO RÃPIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Inicia la API:
   python api.py

2. Verifica en navegador:
   http://localhost:8000/api/clustering/clientes

3. Consume desde tu frontend:
   fetch('http://localhost:8000/api/clustering/clientes')


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… TODO LISTO PARA CONSUMIR DESDE TU FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Los endpoints estÃ¡n funcionando y listos para que tu frontend los consuma.

Solo haz fetch/axios a las URLs y procesa el JSON. ğŸš€

