
 GUÍA DE ENDPOINTS PARA TU FRONTEND


Base URL: http://localhost:8000
Documentación interactiva: http://localhost:8000/docs



 CLUSTERING (NUEVO - Hierarchical Clustering con IA)


1. Clustering de Clientes (Segmentación)
   
   GET /api/clustering/clientes?n_clusters=4

   Retorna:
   {
     "n_segmentos": 4,
     "total_clientes_analizados": 150,
     "silhouette_score": 0.587,
     "calidad_clustering": "Buena",
     "segmentos": [
       {
         "nombre": "VIP - Alta frecuencia",
         "total_clientes": 35,
         "gasto_promedio": 850.00,
         "citas_promedio": 8.2,
         "valor_total_segmento": 29750.00
       }
     ]
   }


2. Clustering de Mascotas
   
   GET /api/clustering/mascotas?n_clusters=3

   Retorna:
   {
     "clusters": [
       {
         "cluster_id": 0,
         "total_mascotas": 250,
         "edad_promedio": 3.5,
         "tipo_mascota_predominante": "Perro"
       }
     ]
   }


3. Clustering de Servicios
   
   GET /api/clustering/servicios?n_clusters=3

   Retorna:
   {
     "grupos": [
       {
         "grupo_id": 0,
         "servicios": ["Consulta General", "Vacunación"],
         "hora_promedio": 10.3
       }
     ]
   }


4. Clustering Completo (TODO)
   
   GET /api/clustering/completo

   Retorna: Todos los análisis de clustering en una sola llamada



 MÉTRICAS DE NEGOCIO


GET /api/metricas/citas-hoy           Citas programadas hoy
GET /api/metricas/cantidad-productos  Total productos
GET /api/metricas/ventas-dia          Ventas del día
GET /api/metricas/ventas-mes          Ventas del mes
GET /api/metricas/productos-proximos-vencer  Productos por vencer
GET /api/metricas/alerta-bajo-inventario  Bajo inventario
GET /api/metricas/comparativa-ventas  Mes actual vs anterior
GET /api/metricas/dashboard           TODAS las métricas (recomendado)



 ANÁLISIS Y ESTADÍSTICAS


GET /api/estadisticas                 Estadísticas generales
GET /api/analisis/tipos-mascota       Tipos más comunes
GET /api/analisis/dias-atencion       Días con más atención
GET /api/analisis/horas-pico          Horas pico
GET /api/analisis/servicios           Servicios más usados



 CHATBOT


POST /api/chat

Body:
{
  "mensaje": "tu pregunta aquí",
  "usuario_id": "user123"
}

Retorna:
{
  "respuesta": "texto de respuesta",
  "intencion": "tipo_detectado",
  "confianza": 0.85,
  "timestamp": "2024-11-04T21:30:00"
}



 EJEMPLO DE USO EN TU FRONTEND


// Obtener clustering de clientes
fetch('http://localhost:8000/api/clustering/clientes')
  .then(res => res.json())
  .then(data => {
    // Usar los datos en tu UI
    const segmentos = data.segmentos;
    const vip = segmentos.find(s => s.nombre.includes('VIP'));
    console.log('Clientes VIP:', vip.total_clientes);
  });

// Obtener todas las métricas
fetch('http://localhost:8000/api/metricas/dashboard')
  .then(res => res.json())
  .then(data => {
    console.log('Citas hoy:', data.citas_hoy.total);
    console.log('Ventas:', data.ventas_dia.total_ventas);
  });

// Chatbot
fetch('http://localhost:8000/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    mensaje: "clustering",
    usuario_id: "user123"
  })
})
  .then(res => res.json())
  .then(data => console.log(data.respuesta));



 RESUMEN


ENDPOINTS IMPLEMENTADOS:

 4 endpoints de Clustering (Hierarchical Clustering con IA)
 8 endpoints de Métricas de Negocio
 5 endpoints de Análisis y Estadísticas
 1 endpoint de Chatbot
 7 endpoints de Consultas

Total: 25 endpoints REST listos para consumir


DOCUMENTACIÓN:

 ENDPOINTS_CLUSTERING.md           Endpoints de clustering detallados
 ENDPOINTS_RESUMEN_FINAL.md        Lista rápida de todos los endpoints
 HIERARCHICAL_CLUSTERING_DOCS.md   Documentación técnica de clustering
 METRICAS_NEGOCIO.md               Documentación de métricas
 http://localhost:8000/docs        Swagger UI (interactivo)


ARCHIVOS DE BACKEND:

 api.py           API REST con FastAPI
 database.py      Consultas a PostgreSQL
 chatbot.py       Chatbot con IA
 predictor.py     Clustering + Predicciones



 INICIO RÁPIDO


1. Inicia la API:
   python api.py

2. Verifica en navegador:
   http://localhost:8000/api/clustering/clientes

3. Consume desde tu frontend:
   fetch('http://localhost:8000/api/clustering/clientes')



 TODO LISTO PARA CONSUMIR DESDE TU FRONTEND


Los endpoints están funcionando y listos para que tu frontend los consuma.

Solo haz fetch/axios a las URLs y procesa el JSON. 

