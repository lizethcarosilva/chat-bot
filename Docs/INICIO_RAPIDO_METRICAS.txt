â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ INICIO RÃPIDO - NUEVAS MÃ‰TRICAS DE NEGOCIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸  TIEMPO ESTIMADO: 10 minutos


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PASO 1: CREAR TABLAS EN LA BASE DE DATOS (5 min)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpciÃ³n A - Desde terminal:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

psql -h gondola.proxy.rlwy.net -p 22967 -U postgres -d railway -f crear_tablas_productos_ventas.sql


OpciÃ³n B - Desde un cliente PostgreSQL (pgAdmin, DBeaver, etc.):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Conecta a tu base de datos
2. Abre el archivo: crear_tablas_productos_ventas.sql
3. Ejecuta todo el contenido

âœ… Esto crearÃ¡:
   â€¢ Tabla: producto
   â€¢ Tabla: venta
   â€¢ Tabla: detalle_venta
   â€¢ 10 productos de ejemplo
   â€¢ Triggers automÃ¡ticos


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PASO 2: INICIAR LA API (1 min)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Desde tu terminal en la carpeta del proyecto:

    python api.py

DeberÃ­as ver:

    âœ… LISTO - Presiona Ctrl+C para detener
    ğŸŒ Servidor corriendo en: http://localhost:8000


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PASO 3: PROBAR EN EL NAVEGADOR (2 min)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Abre en tu navegador:

    http://localhost:8000/docs

Busca la secciÃ³n: "MÃ©tricas de Negocio" (deberÃ­a estar color verde)

Prueba estos endpoints:

1. GET /api/metricas/cantidad-productos
   Click en "Try it out" â†’ "Execute"
   
   DeberÃ­as ver:
   {
     "total_productos": 10,
     "mensaje": "Total de productos en inventario: 10"
   }

2. GET /api/metricas/dashboard
   Click en "Try it out" â†’ "Execute"
   
   VerÃ¡s todas las mÃ©tricas en una sola respuesta


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PASO 4: PROBAR CON EL CHATBOT (2 min)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpciÃ³n A - Desde Swagger UI:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. En http://localhost:8000/docs
2. Busca: POST /api/chat
3. Click "Try it out"
4. En el body, escribe:

{
  "mensaje": "Â¿CuÃ¡ntos productos tenemos?",
  "usuario_id": "test"
}

5. Click "Execute"


OpciÃ³n B - Desde terminal:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

curl -X POST "http://localhost:8000/api/chat" \
     -H "Content-Type: application/json" \
     -d '{"mensaje": "MuÃ©strame el inventario", "usuario_id": "test"}'


OpciÃ³n C - Desde tu React:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

fetch('http://localhost:8000/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    mensaje: "Â¿Hay productos por vencer?",
    usuario_id: "user123"
  })
})
  .then(res => res.json())
  .then(data => console.log(data.respuesta));


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ PREGUNTAS PARA PROBAR CON EL BOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Prueba estas preguntas (una por una):

âœ“ "Â¿CuÃ¡ntos productos tenemos?"
âœ“ "MuÃ©strame el inventario"
âœ“ "Â¿Hay productos con bajo stock?"
âœ“ "Â¿Hay productos prÃ³ximos a vencer?"
âœ“ "MuÃ©strame las alertas"
âœ“ "Â¿CuÃ¡nto hemos vendido?"  (mostrarÃ¡ 0 si no hay ventas)
âœ“ "Â¿CuÃ¡ntas citas hay hoy?"  (mostrarÃ¡ 0 si no hay citas para hoy)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š CREAR UNA VENTA DE PRUEBA (OPCIONAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si quieres ver ventas reales, ejecuta esto en tu base de datos:

-- Crear una venta
INSERT INTO venta (client_id, fecha_venta, metodo_pago, descuento, impuesto, user_id)
VALUES (1, CURRENT_TIMESTAMP, 'Efectivo', 0, 0, 1)
RETURNING venta_id;

-- Supongamos que retornÃ³ venta_id = 1
-- Agregar productos a la venta
INSERT INTO detalle_venta (venta_id, producto_id, cantidad, precio_unitario, subtotal)
VALUES
    (1, 1, 2, 65.00, 130.00),   -- 2 bolsas de alimento
    (1, 4, 3, 7.50, 22.50),      -- 3 juguetes
    (1, 5, 1, 15.00, 15.00);     -- 1 shampoo

Ahora pregunta al bot:
  "Â¿CuÃ¡nto hemos vendido hoy?"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ EJEMPLO RÃPIDO EN REACT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Copia y pega este componente en tu React:

import React, { useState, useEffect } from 'react';

function Dashboard() {
  const [metrics, setMetrics] = useState(null);

  useEffect(() => {
    fetch('http://localhost:8000/api/metricas/dashboard')
      .then(res => res.json())
      .then(data => setMetrics(data))
      .catch(err => console.error(err));
  }, []);

  if (!metrics) return <div>Cargando...</div>;

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial' }}>
      <h1>ğŸ“Š Dashboard Pet Store</h1>
      
      <div style={{ 
        display: 'grid', 
        gridTemplateColumns: 'repeat(4, 1fr)', 
        gap: '20px',
        marginTop: '20px'
      }}>
        <div style={{ 
          background: '#f0f9ff', 
          padding: '20px', 
          borderRadius: '10px',
          textAlign: 'center'
        }}>
          <div style={{ fontSize: '40px' }}>ğŸ“…</div>
          <h3>Citas Hoy</h3>
          <p style={{ fontSize: '32px', fontWeight: 'bold' }}>
            {metrics.citas_hoy.total}
          </p>
        </div>

        <div style={{ 
          background: '#f0fdf4', 
          padding: '20px', 
          borderRadius: '10px',
          textAlign: 'center'
        }}>
          <div style={{ fontSize: '40px' }}>ğŸ“¦</div>
          <h3>Productos</h3>
          <p style={{ fontSize: '32px', fontWeight: 'bold' }}>
            {metrics.productos.total}
          </p>
        </div>

        <div style={{ 
          background: '#fefce8', 
          padding: '20px', 
          borderRadius: '10px',
          textAlign: 'center'
        }}>
          <div style={{ fontSize: '40px' }}>ğŸ’°</div>
          <h3>Ventas DÃ­a</h3>
          <p style={{ fontSize: '32px', fontWeight: 'bold' }}>
            ${metrics.ventas_dia.total_ventas.toFixed(2)}
          </p>
        </div>

        <div style={{ 
          background: '#faf5ff', 
          padding: '20px', 
          borderRadius: '10px',
          textAlign: 'center'
        }}>
          <div style={{ fontSize: '40px' }}>ğŸ“ˆ</div>
          <h3>Ventas Mes</h3>
          <p style={{ fontSize: '32px', fontWeight: 'bold' }}>
            ${metrics.ventas_mes.total_ventas.toFixed(2)}
          </p>
        </div>
      </div>

      {/* Alertas */}
      <div style={{ marginTop: '30px' }}>
        {metrics.productos_proximos_vencer.criticos > 0 && (
          <div style={{ 
            background: '#fee', 
            padding: '15px', 
            borderRadius: '8px',
            marginBottom: '10px',
            borderLeft: '4px solid red'
          }}>
            <strong>ğŸ”´ ALERTA:</strong> {metrics.productos_proximos_vencer.criticos} productos crÃ­ticos por vencer
          </div>
        )}
        
        {metrics.bajo_inventario.total_alertas > 0 && (
          <div style={{ 
            background: '#ffe', 
            padding: '15px', 
            borderRadius: '8px',
            borderLeft: '4px solid orange'
          }}>
            <strong>ğŸš¨ ADVERTENCIA:</strong> {metrics.bajo_inventario.total_alertas} productos con bajo stock
          </div>
        )}
      </div>

      {/* Tendencia */}
      <div style={{ marginTop: '30px', textAlign: 'center' }}>
        <h3>Tendencia de Ventas</h3>
        <p style={{ fontSize: '48px' }}>
          {metrics.comparativa_ventas.tendencia === 'crecimiento' ? 'ğŸ“ˆ' : 'ğŸ“‰'}
        </p>
        <p style={{ 
          fontSize: '24px',
          color: metrics.comparativa_ventas.porcentaje_cambio > 0 ? 'green' : 'red'
        }}>
          {metrics.comparativa_ventas.porcentaje_cambio > 0 ? '+' : ''}
          {metrics.comparativa_ventas.porcentaje_cambio.toFixed(2)}%
        </p>
      </div>
    </div>
  );
}

export default Dashboard;


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VERIFICACIÃ“N RÃPIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Marca lo que ya completaste:

â–¡ Tablas creadas en la base de datos
â–¡ API iniciada (http://localhost:8000)
â–¡ Swagger UI funciona (http://localhost:8000/docs)
â–¡ Endpoint /api/metricas/cantidad-productos retorna 10 productos
â–¡ Chatbot responde preguntas de inventario
â–¡ Dashboard React funcionando (opcional)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ SOLUCIÃ“N DE PROBLEMAS RÃPIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problema: "Tabla 'producto' no existe"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SoluciÃ³n: Ejecuta el script SQL crear_tablas_productos_ventas.sql


Problema: API no inicia
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SoluciÃ³n: 
  python -m pip install fastapi uvicorn psycopg2
  python api.py


Problema: Productos muestran 0
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Normal si acabas de crear las tablas.
El script SQL ya inserta 10 productos de ejemplo.
Verifica con:
  SELECT COUNT(*) FROM producto;


Problema: React no conecta
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Verifica:
  1. API corriendo en http://localhost:8000
  2. CORS configurado en api.py (ya estÃ¡)
  3. URL correcta en fetch


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š MÃS INFORMACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para documentaciÃ³n completa:
  â†’ METRICAS_NEGOCIO.md

Para resumen detallado:
  â†’ NUEVAS_METRICAS_RESUMEN.txt

Para ejemplos de cÃ³digo React:
  â†’ METRICAS_NEGOCIO.md (secciÃ³n "Componentes React")

DocumentaciÃ³n interactiva:
  â†’ http://localhost:8000/docs


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‰ Â¡LISTO PARA USAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Tu sistema ahora incluye:

âœ… 7 nuevas mÃ©tricas de negocio
âœ… 8 nuevos endpoints REST
âœ… Chatbot con anÃ¡lisis de ventas e inventario
âœ… Dashboard completo
âœ… Alertas automÃ¡ticas
âœ… Comparativas de rendimiento

Â¡Disfruta del anÃ¡lisis con IA! ğŸš€

