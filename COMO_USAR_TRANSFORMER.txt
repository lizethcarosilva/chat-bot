================================================================================
                    C√ìMO USAR EL CHATBOT TRANSFORMER
                         Gu√≠a R√°pida Pr√°ctica
================================================================================

üìã √çNDICE:
1. Inicio R√°pido (3 pasos)
2. Prueba del Sistema
3. Usar el Chatbot
4. Entrenar el Modelo (Opcional)
5. Integraci√≥n con Frontend
6. Troubleshooting

================================================================================
1. INICIO R√ÅPIDO (3 PASOS)
================================================================================

PASO 1: Instalar Dependencias
------------------------------
Windows:
  pip install -r requirements.txt

Linux/Mac:
  pip3 install -r requirements.txt


PASO 2: Verificar Instalaci√≥n
------------------------------
Windows:
  PRUEBA_RAPIDA.bat

Linux/Mac:
  chmod +x PRUEBA_RAPIDA.sh
  ./PRUEBA_RAPIDA.sh


PASO 3: Iniciar la API
----------------------
Windows:
  python api.py

Linux/Mac:
  python3 api.py

‚úÖ La API estar√° disponible en: http://localhost:8000

================================================================================
2. PRUEBA DEL SISTEMA
================================================================================

OPCI√ìN A: Desde el Navegador
-----------------------------
1. Abre: http://localhost:8000/docs
2. Busca el endpoint: POST /api/chat
3. Click en "Try it out"
4. Escribe un mensaje:
   {
     "mensaje": "Hola, ¬øc√≥mo est√°s?",
     "usuario_id": "user123"
   }
5. Click en "Execute"


OPCI√ìN B: Demo Interactivo
---------------------------
Windows:
  python demo_transformer.py

Linux/Mac:
  python3 demo_transformer.py

Selecciona:
  Opci√≥n 1: Demo autom√°tico (ejemplos predefinidos)
  Opci√≥n 2: Modo interactivo (chatea libremente)


OPCI√ìN C: Desde Terminal
-------------------------
curl -X POST "http://localhost:8000/api/chat" \
     -H "Content-Type: application/json" \
     -d '{"mensaje": "Mu√©strame las estad√≠sticas"}'

================================================================================
3. USAR EL CHATBOT
================================================================================

DESDE JAVASCRIPT/FRONTEND
--------------------------
// Funci√≥n b√°sica
async function enviarMensaje(mensaje) {
    const response = await fetch('http://localhost:8000/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            mensaje: mensaje,
            usuario_id: 'user123'
        })
    });
    
    const data = await response.json();
    console.log(data.respuesta);
    console.log(`Modelo: ${data.modelo}`);
    console.log(`Confianza: ${data.confianza * 100}%`);
}

// Usar
enviarMensaje("¬øCu√°ntas citas hay hoy?");


DESDE REACT
-----------
Ver archivo: ejemplo_uso_frontend.js
Secci√≥n: "COMPONENTE REACT"


DESDE VUE
---------
Ver archivo: ejemplo_uso_frontend.js
Secci√≥n: "COMPONENTE VUE"


DESDE PYTHON
------------
from transformer_chatbot import PetStoreBotTransformer

bot = PetStoreBotTransformer()
resultado = bot.procesar_mensaje("Hola")
print(resultado['respuesta'])

================================================================================
4. ENTRENAR EL MODELO (OPCIONAL)
================================================================================

El sistema funciona SIN entrenar (modo h√≠brido), pero puedes entrenarlo para
mejores resultados:

PASO 1: Ejecutar Entrenamiento
-------------------------------
Windows:
  python entrenar_transformer.py

Linux/Mac:
  python3 entrenar_transformer.py

‚è±Ô∏è Tiempo estimado: 10-30 minutos


PASO 2: Verificar Modelo Entrenado
-----------------------------------
Debe aparecer el archivo:
  models/transformer_chatbot.pth


PASO 3: Reiniciar API
----------------------
Ctrl+C para detener
python api.py para reiniciar

El sistema detectar√° autom√°ticamente el modelo entrenado.

================================================================================
5. EJEMPLOS DE PREGUNTAS
================================================================================

ESTAD√çSTICAS
------------
‚Ä¢ "Mu√©strame las estad√≠sticas"
‚Ä¢ "¬øCu√°ntas mascotas hay registradas?"
‚Ä¢ "Dame un reporte general"

CITAS
-----
‚Ä¢ "¬øCu√°ntas citas hay hoy?"
‚Ä¢ "Mu√©strame la agenda"
‚Ä¢ "¬øHay citas programadas?"

VENTAS
------
‚Ä¢ "¬øCu√°nto vendimos hoy?"
‚Ä¢ "Ventas del mes"
‚Ä¢ "Reporte de ingresos"

MASCOTAS
--------
‚Ä¢ "¬øCu√°l es el tipo de mascota m√°s com√∫n?"
‚Ä¢ "Tipos de mascotas registradas"
‚Ä¢ "An√°lisis de mascotas"

INVENTARIO
----------
‚Ä¢ "¬øCu√°ntos productos tenemos?"
‚Ä¢ "Productos pr√≥ximos a vencer"
‚Ä¢ "Alertas de inventario"
‚Ä¢ "Stock bajo"

AN√ÅLISIS IA
-----------
‚Ä¢ "Predice tipo de mascota"
‚Ä¢ "An√°lisis de clustering"
‚Ä¢ "Segmentaci√≥n de clientes"

================================================================================
6. RESPUESTA DEL API
================================================================================

FORMATO DE RESPUESTA
---------------------
{
  "respuesta": "üìä **Estad√≠sticas del Sistema:**\n\nüêæ Mascotas: 150...",
  "intencion": "transformer_generation",
  "confianza": 0.85,
  "timestamp": "2024-11-06T10:30:00",
  "modelo": "Transformer"
}

CAMPOS:
‚Ä¢ respuesta:  Texto generado (puede incluir Markdown)
‚Ä¢ intencion:  Tipo de intenci√≥n detectada
‚Ä¢ confianza:  0.0 a 1.0 (0% a 100%)
‚Ä¢ timestamp:  Momento de la respuesta
‚Ä¢ modelo:     "Transformer" o "H√≠brido"

================================================================================
7. ALTERNAR ENTRE MODELOS
================================================================================

USAR TRANSFORMER (por defecto)
-------------------------------
fetch('http://localhost:8000/api/chat?use_transformer=true', {...})

USAR LSTM CL√ÅSICO
-----------------
fetch('http://localhost:8000/api/chat?use_transformer=false', {...})

================================================================================
8. TROUBLESHOOTING
================================================================================

PROBLEMA: Modelo no encontrado
-------------------------------
S√≠ntoma: ‚ö†Ô∏è Modelo Transformer no encontrado
Soluci√≥n: 
  - No te preocupes, el sistema funciona en modo h√≠brido
  - Para entrenar: python entrenar_transformer.py


PROBLEMA: Error al importar torch
----------------------------------
S√≠ntoma: ModuleNotFoundError: No module named 'torch'
Soluci√≥n:
  pip install torch


PROBLEMA: Puerto ocupado
-------------------------
S√≠ntoma: Error: Address already in use
Soluci√≥n:
  1. Mata el proceso en puerto 8000
  2. O cambia el puerto en api.py:
     uvicorn.run("api:app", port=8001)


PROBLEMA: Respuestas lentas
----------------------------
S√≠ntoma: El bot tarda > 3 segundos
Soluci√≥n:
  1. Usa GPU si est√° disponible
  2. Reduce el tama√±o del modelo en config_transformer.py:
     'd_model': 128  (en lugar de 256)


PROBLEMA: Respuestas repetitivas
---------------------------------
S√≠ntoma: El bot siempre dice lo mismo
Soluci√≥n:
  Aumenta temperature en config_transformer.py:
  'temperature': 1.0  (en lugar de 0.8)


PROBLEMA: Respuestas sin sentido
---------------------------------
S√≠ntoma: El bot genera texto incoherente
Soluci√≥n:
  1. Entrena m√°s √©pocas
  2. Reduce temperature:
     'temperature': 0.5


PROBLEMA: Out of Memory
------------------------
S√≠ntoma: RuntimeError: CUDA out of memory
Soluci√≥n:
  Reduce batch_size en config_transformer.py:
  'batch_size': 16  (en lugar de 32)

================================================================================
9. ARCHIVOS IMPORTANTES
================================================================================

C√ìDIGO PRINCIPAL:
‚Ä¢ transformer_chatbot.py     - Implementaci√≥n del Transformer
‚Ä¢ config_transformer.py       - Configuraci√≥n del modelo
‚Ä¢ entrenar_transformer.py     - Script de entrenamiento
‚Ä¢ api.py                      - API REST (modificado)

DOCUMENTACI√ìN:
‚Ä¢ README_TRANSFORMER.md       - Documentaci√≥n t√©cnica completa
‚Ä¢ INSTRUCCIONES_RAPIDAS.md    - Gu√≠a de inicio r√°pido
‚Ä¢ RESUMEN_IMPLEMENTACION_TRANSFORMER.md - Detalles t√©cnicos

DEMOS Y EJEMPLOS:
‚Ä¢ demo_transformer.py         - Demo interactivo
‚Ä¢ ejemplo_uso_frontend.js     - Ejemplos React/Vue/JS
‚Ä¢ PRUEBA_RAPIDA.bat          - Script de prueba (Windows)
‚Ä¢ PRUEBA_RAPIDA.sh           - Script de prueba (Linux/Mac)

ESTE ARCHIVO:
‚Ä¢ COMO_USAR_TRANSFORMER.txt   - Esta gu√≠a

================================================================================
10. ENLACES R√ÅPIDOS
================================================================================

Cuando la API est√© corriendo (python api.py):

‚Ä¢ Documentaci√≥n Interactiva:  http://localhost:8000/docs
‚Ä¢ Documentaci√≥n Alternativa:  http://localhost:8000/redoc
‚Ä¢ Health Check:                http://localhost:8000/api/health
‚Ä¢ Comandos del Bot:            http://localhost:8000/api/chat/comandos
‚Ä¢ Estado de Modelos:           http://localhost:8000/api/predicciones/estado

================================================================================
11. CONFIGURACI√ìN AVANZADA
================================================================================

EDITAR PAR√ÅMETROS DEL MODELO
-----------------------------
Abre: config_transformer.py

Cambia:
‚Ä¢ d_model:       Tama√±o de embeddings (128, 256, 512)
‚Ä¢ num_heads:     Cabezas de atenci√≥n (4, 8, 16)
‚Ä¢ num_layers:    Profundidad (2, 4, 6, 8)
‚Ä¢ temperature:   Creatividad (0.1-1.5)
‚Ä¢ top_k:         Top-K sampling (10-100)


AGREGAR DATOS DE ENTRENAMIENTO
-------------------------------
Abre: entrenar_transformer.py
Funci√≥n: generar_datos_entrenamiento()

Agrega pares (pregunta, respuesta):
  ("tu pregunta aqu√≠", "respuesta ideal aqu√≠"),


MODIFICAR INTENCIONES BASE
---------------------------
Abre: config_transformer.py
Secci√≥n: INTENCIONES_BASE

Agrega o modifica respuestas predefinidas.

================================================================================
12. PERFORMANCE ESPERADA
================================================================================

M√âTRICAS:
‚Ä¢ Tiempo de respuesta:  < 1 segundo
‚Ä¢ Confianza promedio:   75-90%
‚Ä¢ Accuracy intenci√≥n:   85-95%
‚Ä¢ Vocabulario:          5000 palabras

HARDWARE RECOMENDADO:
‚Ä¢ CPU:  Intel i5 o superior
‚Ä¢ RAM:  8GB m√≠nimo, 16GB recomendado
‚Ä¢ GPU:  Opcional (mejora 10-50x la velocidad)
‚Ä¢ Disco: 500MB para modelos

================================================================================
13. SIGUIENTE NIVEL
================================================================================

UNA VEZ QUE FUNCIONE:
---------------------
1. ‚úÖ Entrena el modelo completo
2. ‚úÖ Agrega m√°s datos de entrenamiento
3. ‚úÖ Experimenta con par√°metros (temperature, layers)
4. ‚úÖ Integra con tu frontend
5. ‚úÖ Implementa cache para respuestas frecuentes
6. ‚úÖ Agrega autenticaci√≥n
7. ‚úÖ Deploy en producci√≥n

MEJORAS AVANZADAS:
------------------
‚Ä¢ Fine-tuning con GPT-2/GPT-3
‚Ä¢ RAG (Retrieval-Augmented Generation)
‚Ä¢ Multi-idioma
‚Ä¢ Personalizaci√≥n por usuario
‚Ä¢ Integraci√≥n con voz (TTS/STT)

================================================================================
14. SOPORTE
================================================================================

SI TIENES PROBLEMAS:
--------------------
1. ‚úÖ Lee esta gu√≠a completa
2. ‚úÖ Revisa README_TRANSFORMER.md
3. ‚úÖ Ejecuta PRUEBA_RAPIDA.bat/.sh
4. ‚úÖ Revisa los logs en consola
5. ‚úÖ Verifica config_transformer.py

RECURSOS ADICIONALES:
---------------------
‚Ä¢ PyTorch Docs:      https://pytorch.org/docs/
‚Ä¢ FastAPI Docs:      https://fastapi.tiangolo.com/
‚Ä¢ Transformer Paper: https://arxiv.org/abs/1706.03762

================================================================================
15. CHECKLIST DE VERIFICACI√ìN
================================================================================

ANTES DE USAR:
‚ñ° Python instalado (3.8+)
‚ñ° Dependencias instaladas (pip install -r requirements.txt)
‚ñ° Base de datos configurada
‚ñ° Puerto 8000 disponible

PRIMER USO:
‚ñ° Ejecutar PRUEBA_RAPIDA.bat/.sh
‚ñ° Iniciar API (python api.py)
‚ñ° Abrir http://localhost:8000/docs
‚ñ° Probar endpoint /api/chat

OPCIONAL (MEJOR RENDIMIENTO):
‚ñ° Entrenar modelo (python entrenar_transformer.py)
‚ñ° Verificar models/transformer_chatbot.pth existe
‚ñ° Reiniciar API

INTEGRACI√ìN:
‚ñ° Copiar c√≥digo de ejemplo_uso_frontend.js
‚ñ° Ajustar API_BASE_URL a tu servidor
‚ñ° Probar desde tu frontend

================================================================================

üéâ ¬°LISTO PARA USAR!

El chatbot con Transformer est√° completamente configurado y listo.

Comienza con:
  python api.py

Y visita:
  http://localhost:8000/docs

¬°Buena suerte! üöÄ

================================================================================

